@import models.Square._

@(square: Square, login: Boolean)(implicit flash: Flash)
<!--TODO: Comprendre pk ca ma charche pas comme ça =>  jsSquares-->

@css = {
    <!-- For this page-->
    <link href="@routes.Assets.versioned("stylesheets/home.css")" rel="stylesheet">
}

@js(square: Square) = {
<script src="@routes.Assets.versioned("javascripts/drawMS/highlight-square.js")"></script>
<script src="@routes.Assets.versioned("javascripts/drawMS/coords-in-canvas.js")"></script>
<script src="@routes.Assets.versioned("javascripts/drawMS/select-squares.js")"></script>
<script src="@routes.Assets.versioned("javascripts/drawMS/draw-ms.js")"></script>


<!--Set the Square-->
<script>
    var square = document.getElementById("square");
    var canvasWidth = square.clientWidth;


    //TODO: Comprendre pk ca ma charche pas comme ça
    //var jsSquares = [square.squares.map(t =>"\"" + t._1 + "\"").mkString(",")];

    var squaresString = "@square.squares.map(t =>t._1).mkString("specialBase64")";
    var jsSquares = squaresString.split("specialBase64");

    drawSquares(jsSquares, @square.nbSquaresOneEdge, square, canvasWidth);



    // canvas where we will draw the selected squares and event
    var canvasToDraw = document.getElementById("selectedSquare");
    canvasToDraw.width = canvasWidth;
    canvasToDraw.height = canvasWidth;
    var contextToDraw = canvasToDraw.getContext('2d');

    // add event to the canvas to draw
    selectSquares(canvasToDraw);

</script>


<!--Set the square previus-->

<script>
    var previewSquare = $("#previewSquare");
    var width = previewSquare.width();
    previewSquare.height(width).width(width);
    previewSquare.attr("height", width).attr("width", width);

    highlightSquare(square, previewSquare.get(0), jsSquares, @square.nbSquaresOneEdge);
</script>


}

@commonToAllPage.template(css, sidebar(), mainBarColumn(flash), js(square), login)